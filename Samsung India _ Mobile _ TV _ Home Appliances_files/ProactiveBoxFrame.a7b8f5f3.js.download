((self||this)["webpackJsonp@sprinklr/chat-web-client"]=(self||this)["webpackJsonp@sprinklr/chat-web-client"]||[]).push([[45],{1851:function(t,e,o){"use strict";o.r(e);var r=o(384),n=o.n(r),a=o(389),c=o(395),i=o(385),s=o(196),b=o.n(s),p=o(424),d=o(386),l=o(532),m=o(387);const j=Object(d.a)("div",{target:"ed55mpd0"})("width:100%;",(t=>"row"===Object(m.f)("proactivePrompt.direction")(t)&&"position: absolute; bottom: 0;"),";padding:",Object(m.h)("proactivePrompt.padding"),";display:flex;flex-direction:column;color:",Object(m.b)("charcoal"),";"),O=Object(d.a)(l.a,{target:"ed55mpd1"})("position:absolute;flex-shrink:0;padding:0;border-radius:",(t=>Object(m.a)("proactivePrompt.removeIconButton.button.borderRadius","50%")(t)),";background-color:",Object(m.f)("proactivePrompt.removeIconButton.button.backgroundColor"),";height:",Object(m.f)("proactivePrompt.removeIconButton.button.height"),"px;width:",Object(m.f)("proactivePrompt.removeIconButton.button.width"),"px;box-shadow:",Object(m.f)("proactivePrompt.removeIconButton.button.boxShadow"),";"),u=t=>Object(i.css)("height:",Object(m.f)("proactivePrompt.removeIconButton.icon.height")({theme:t}),"px;width:",Object(m.f)("proactivePrompt.removeIconButton.icon.width")({theme:t}),"px;fill:",Object(m.f)("proactivePrompt.removeIconButton.icon.fill")({theme:t}),";");var g=o(122),f=o.n(g),h=o(400),v=o(419),x=o(403),P=o(390);const y=t=>Object(m.f)("proactivePrompt.removeIconButton.button.width")({theme:t})/2+2,w=Object(d.a)("div",{target:"e1a4zrzl0"})((t=>t.isActionable&&"cursor: pointer;"),";position:relative;margin:0 0 16px;background-color:",Object(m.b)("white"),";",(t=>t.messageStyles),";"),I=Object(d.a)("div",{target:"e1a4zrzl1"})("flex-grow:1;",(t=>t.renderRemoveIcon&&Object(P.c)(`padding-right: ${y(t.theme)}px`,`padding-left: ${y(t.theme)}px`)(t)),";"),R=Object(d.a)(O,{target:"e1a4zrzl2"})("top:",Object(m.f)("proactivePrompt.removeIconButton.marginTop"),"px;",(t=>`${Object(P.c)(`right: ${Object(m.f)("proactivePrompt.removeIconButton.marginRight")(t)}px`,`left: ${Object(m.f)("proactivePrompt.removeIconButton.marginLeft")(t)}px`)(t)}`),";");var E=o(44),A=o.n(E),k=o(82),C=o.n(k),T=o(433),$=o(535),N=o(948),B=o(410);const S=t=>{if(!t)return B.a;const[e,o,r,n]=f()(A()(t," "),T.e);return{top:Math.abs(n-o+r),bottom:n+o+r,left:Math.abs(n-e+r),right:n+e+r}},D=Object(d.a)("div",{target:"e1f359l40"})("z-index:",(t=>Object(m.f)("frame.zIndex")(t)),";transform:translatez(",(t=>Object(m.f)("frame.translateZ")(t)),"px);position:fixed;width:500px;height:500px;bottom:0px;",`${Object(m.f)("trigger.align","right")}: 0px`,";content:'';pointer-events:none;background:radial-gradient( ",`at ${Object(m.f)("trigger.align","right")} bottom`,",rgba(29,39,54,0.1) 0%,rgba(29,39,54,0) 72% );"),G=t=>{let{theme:e,visiblePrompt:o,bottomOffset:r}=t;return r||("row"===Object(m.f)("proactivePrompt.direction")({theme:e})?Object(N.c)(e)-((t,e)=>{if(C()(e))return B.a;const{buttons:o,additional:r}=e;return o&&o.length>0?S(Object(m.f)("proactivePrompt.button.boxShadow")({theme:t})):r&&!r.hideReplyBox?S(Object(m.f)("proactivePrompt.replyBox.boxShadow")({theme:t})):S(Object(m.f)("proactivePrompt.message.boxShadow")({theme:t}))})(e,o).bottom:Object(N.c)(e)+Object(m.f)("trigger.size")({theme:e}))},_=Object(d.a)("div",{target:"e1f359l41"})("background:transparent;bottom:",(t=>G(t)),"px;",(t=>(t=>{const e=Object(m.f)("trigger.size")({theme:t});return"row"===Object(m.f)("proactivePrompt.direction")({theme:t})?Object(N.d)({leftOffset:e,rightOffset:e})({theme:t}):Object(N.d)()({theme:t})})(t.theme)),";max-width:",(t=>t.iframeWidth+Object(m.f)("proactivePrompt.paddingLeft")(t)+Object(m.f)("proactivePrompt.paddingRight")(t)),"px;position:fixed;max-height:80%;width:100%;height:",(t=>t.iframeHeight),"px;z-index:",(t=>Object(m.f)("frame.zIndex")(t)),";transform:translatez(",(t=>Object(m.f)("frame.translateZ")(t)),"px);visibility:",(t=>t.isVisible?"visible":"hidden"),";"),z=Object(d.a)($.a,{target:"e1f359l42"})({name:"1l2nfdo",styles:"border:0 none;height:100%;width:100%;"}),M={name:"1egabj8",styles:".frame-content{width:100%;height:100%;}.frame-root{height:100%;width:100%;}body{background-color:transparent;}"};const H=Object(d.a)("div",{target:"e106gict0"})("background-color:",Object(m.b)("white"),";"),L=Object(d.a)("div",{target:"e106gict1"})("height:",Object(m.f)("proactivePrompt.removeIconButton.button.height"),"px;margin:",Object(m.h)("proactivePrompt.removeIconButton.margin"),";"),V=Object(d.a)("div",{target:"e106gict2"})({name:"79elbk",styles:"position:relative;"}),W=Object(d.a)(O,{target:"e106gict3"})("top:0px;",(t=>"right"===Object(m.f)("trigger.align","right")(t)?`right: ${Object(m.f)("proactivePrompt.removeIconButton.marginRight")(t)}px`:`left: ${Object(m.f)("proactivePrompt.removeIconButton.marginLeft")(t)}px`),";opacity:0;",V,":hover &{opacity:1;}",P.k,"{opacity:1;}"),Y=Object(d.a)("div",{target:"e106gict4"})((t=>t.renderRemoveIconInside&&`padding-top: ${S(Object(m.f)("proactivePrompt.message.boxShadow")(t)).top}px`),";:last-child{",w,"{:last-child{",(t=>"row"===Object(m.f)("proactivePrompt.direction")(t)&&`margin: 0 0 ${S(Object(m.f)("proactivePrompt.message.boxShadow")(t)).bottom}px`),";}}}");var q=o(399),U=o(451),F=o(883);var J=t=>{const{message:e,onClick:o,onClose:n,isActionable:a}=t,s=Object(c.b)(),{direction:b}=Object(q.a)(),p=Object(m.f)("proactivePrompt.message")({theme:s}),d=Object(h.a)(),l=x.a.getPromptEnableIndividualMessageDismissal(d),j=Object(r.useCallback)((t=>{"A"===t.target.tagName.toUpperCase()&&t.stopPropagation()}),[]);return Object(i.jsx)(w,{className:"text-wrap flex-row-container",messageStyles:p,onClick:o,isActionable:a},Object(i.jsx)(I,{direction:b,renderRemoveIcon:l,onClick:j},Object(i.jsx)(F.a,{text:e.text||"",textEntities:e.textEntities})),l&&Object(i.jsx)(R,{className:"flex-column-container center-x-y",direction:b,onClick:t=>{t.stopPropagation(),n()},iconName:"closeIcon",Icon:U.a,iconCss:u(s)}))},Z=o(394);const K=Object(d.a)("div",{target:"evyncl50"})("background-color:",Object(m.b)("white"),";box-shadow:",Object(m.f)("proactivePrompt.replyBox.boxShadow"),";border-radius:10px;margin:0 0 ",(t=>"row"===Object(m.f)("proactivePrompt.direction")(t)?S(Object(m.f)("proactivePrompt.replyBox.boxShadow")(t)).bottom:"16"),"px;padding:14px 20px;font-size:",Object(m.e)("md"),";cursor:pointer;justify-content:space-between;"),Q=Object(d.a)("div",{target:"evyncl51"})({name:"1nn7ex",styles:"color:#a9a9a9;"}),X=Object(d.a)(Z.b,{target:"evyncl52"})("fill:",Object(m.b)("anchor"),";height:20px;width:20px;");var tt=o(837);var et=t=>{const{onReply:e}=t,o=Object(h.a)();return Object(i.jsx)(K,{className:"flex-row-container",onClick:e},Object(i.jsx)(Q,null,o.conversationScreen.inputPlaceholderMessage),Object(i.jsx)(X,{alt:tt.a,name:Z.a.ATTACHMENT}))},ot=o(402),rt=o(429);const nt=Object(d.a)("div",{target:"eygqptd0"})("background-color:",Object(m.b)("white"),";"),at=Object(d.a)(nt,{target:"eygqptd1"})("display:flex;margin-bottom:",(t=>"row"===Object(m.f)("proactivePrompt.direction")(t)?S(Object(m.f)("proactivePrompt.button.boxShadow")(t)).bottom:"10"),"px;border-radius:",8,"px;"),ct=Object(d.a)("div",{target:"eygqptd2"})("display:flex;flex-wrap:wrap;margin-bottom:",(t=>"row"===Object(m.f)("proactivePrompt.direction")(t)?S(Object(m.f)("proactivePrompt.button.boxShadow")(t)).bottom:"8"),"px;",(t=>`\n      flex-direction: ${"left"===Object(m.f)("trigger.align")(t)?"row":"row-reverse"};\n      justify-content: ${Object(P.c)("flex-start","flex-end")(t)};\n    `),""),it=Object(d.a)(ot.c,{target:"eygqptd3"})("border-radius:",8,"px;background-color:",(t=>Object(rt.i)(Object(m.b)("primary")(t),.05)),";font-weight:400;min-width:88px;padding:10px 20px;",(t=>Object(m.f)("proactivePrompt.button")(t))," &:hover{color:",Object(m.b)("white"),";background-color:",Object(m.b)("primary"),";}"),st=t=>{let{handleClick:e,buttons:o}=t;const r=Object(c.b)(),{direction:n}=Object(q.a)(),a="left"===Object(m.f)("trigger.align")({theme:r})?"m-r-3":"m-l-3";return Object(i.jsx)(ct,{onClick:e,theme:r,direction:n},f()(o,(t=>Object(i.jsx)(at,{key:t.id,className:a},Object(i.jsx)(it,{size:ot.a.LARGE,variant:ot.b.TERTIARY,"data-id":t.id},t.label)))))};var bt=n.a.memo(st),pt=o(838),dt=o(439);var lt=t=>{const{id:e,messages:o,buttons:n,additional:a,onAction:s}=t,b=Object(c.b)(),p=Object(h.a)(),d=x.a.getPromptEnableIndividualMessageDismissal(p),l=Object(v.a)(),{hideReplyBox:m}=a||B.a,j=n&&n.length>0,O=!j,g=Object(r.useRef)(null);Object(r.useEffect)((()=>{var t;s({type:pt.a.TRIGGERED,promptId:e}),l({action:dt.a.PROACTIVE_PROMPT_TRIGGERED,label:null===(t=g.current)||void 0===t?void 0:t.innerText,additional:{id:e,type:"CHAT"}})}),[]);const P=t=>{var o;const r=t.target.dataset.id,n=null===(o=g.current)||void 0===o?void 0:o.innerText;r&&(s({type:pt.a.ENGAGED,buttonId:r,promptId:e}),l({action:dt.a.PROACTIVE_PROMPT_ENGAGED,label:n,additional:{id:e,type:"CHAT"}}))},y=()=>{var t;s({type:pt.a.ENGAGED,promptId:e}),l({action:dt.a.PROACTIVE_PROMPT_ENGAGED,label:null===(t=g.current)||void 0===t?void 0:t.innerText,additional:{id:e,type:"CHAT"}})},w=()=>{var t;O&&(s({type:pt.a.ENGAGED,promptId:e}),l({action:dt.a.PROACTIVE_PROMPT_ENGAGED,label:null===(t=g.current)||void 0===t?void 0:t.innerText,additional:{id:e,type:"CHAT"}}))},I=()=>{var t;s({type:pt.a.CLOSED,promptId:e}),l({action:dt.a.PROACTIVE_PROMPT_CLOSED,label:null===(t=g.current)||void 0===t?void 0:t.innerText,additional:{id:e,type:"CHAT"}})};return Object(i.jsx)(V,{className:"spr"},!d&&Object(i.jsx)(L,{className:"spr"},Object(i.jsx)(H,null,Object(i.jsx)(W,{className:"flex-column-container center-x-y",iconName:"closeIcon",Icon:U.a,iconCss:u(b),onClick:I,theme:b}))),Object(i.jsx)(Y,{renderRemoveIconInside:d,ref:g},f()(o,((t,e)=>Object(i.jsx)(J,{key:`message_${e}`,message:t,onClose:I,onClick:w,isActionable:O})))),j?Object(i.jsx)(bt,{handleClick:P,buttons:n}):m?null:Object(i.jsx)(et,{onReply:y}))},mt=o(398),jt=o(1048);const Ot=t=>{let{type:e,promptId:o,buttonId:r}=t;return{type:jt.a,payload:{type:e,buttonId:r,promptId:o}}};var ut=n.a.forwardRef(((t,e)=>{const o=Object(mt.a)(Ot),{prompt:r}=t;return Object(i.jsx)(j,{ref:e},Object(i.jsx)(lt,{key:r.id,id:r.id,messages:r.messages,buttons:r.buttons,onAction:o,additional:r.additional}))})),gt=o(396),ft=o(450),ht=o(1302),vt=o(15);const xt=t=>Object(ft.g)(Object(gt.b)(t));e.default=t=>{let{visiblePrompt:e,chatBoxFrameRef:o}=t;const s=Object(a.d)(xt),d=Object(c.b)(),l=Object(p.a)(),[j,O]=Object(r.useState)(0),u=Object(r.useRef)(null),[g,f]=Object(r.useState)(!1),h=!!b()(l,"otherConfigs.proactivePrompt.showWithBoxOpen"),v=Object(m.f)("proactivePrompt.maxWidth")({theme:d}),x=b()(e,"additional.text.maxWidth",v),P=()=>{const t=u.current,e=t?t.getBoundingClientRect().height:0;O(e)};return Object(r.useEffect)((()=>{if(o.current){const t=!s&&o.current&&Object(vt.b)().innerHeight-(o.current.clientHeight+Object(ht.g)(d))||0;f(h&&t>j)}}),[s,o.current,j]),Object(i.jsx)(n.a.Fragment,null,Object(i.jsx)(_,{className:"spr-chat__proactive-box spr-live-chat-frame",iframeHeight:j,iframeWidth:x,theme:d,isVisible:s||g,visiblePrompt:e,bottomOffset:g&&o.current?o.current.clientHeight+Object(ht.g)(d):void 0},Object(i.jsx)(z,{name:"spr-chat__proactive-frame",contentDidMount:P,contentDidUpdate:P},Object(i.jsx)(i.Global,{styles:M}),Object(i.jsx)(ut,{ref:u,prompt:e}))),Object(i.jsx)(D,{theme:d}))}},402:function(t,e,o){"use strict";o.d(e,"c",(function(){return u})),o.d(e,"a",(function(){return g})),o.d(e,"b",(function(){return f}));var r=o(384),n=o.n(r),a=o(395),c=o(386),i=o(385),s=o(390);const b=`\n    border: 1px solid transparent;\n    cursor: pointer;\n    &:disabled {\n      cursor: not-allowed;\n      opacity: 0.6;\n    };\n    \n   &:focus {\n      ${s.h};\n   }\n   \n   &:active {\n      ${s.f};\n   }\n   \n   ${s.k} {\n      &:focus {\n        ${s.f};\n      }\n   \n     &:active {\n        ${s.h};\n     }\n   }\n`,p=Object(c.a)("button",{target:"er3vaeu0"})(b,";",(t=>Object(i.css)(t.buttonStyles,"","")),";");var d=o(387),l=o(480),m=o(410);function j(){return j=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r])}return t},j.apply(this,arguments)}const O=t=>{const e=Object(a.b)(),{size:o,variant:r,selected:n,shape:c,overrideStyles:s}=t,b=Object(d.f)(`button.${c||l.b.STANDARD}`)({theme:e})||m.a,O={...b.default,...b[r],...b[o],...s};return Object(i.jsx)(p,j({},t,{className:`text-wrap ${t.className}`,buttonStyles:O,"data-selected":n}),t.label||t.children)};O.defaultProps={shape:l.b.STANDARD,size:l.c.LARGE,variant:l.d.PRIMARY};var u=n.a.memo(O);const g={LARGE:"lg",MEDIUM:"md"},f={PRIMARY:"primary",SECONDARY:"secondary",TERTIARY:"tertiary"}},514:function(t,e,o){"use strict";var r=o(528);e.a=r.a},528:function(t,e,o){"use strict";var r=o(384),n=o.n(r),a=o(385);function c(){return c=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r])}return t},c.apply(this,arguments)}e.a=n.a.memo((t=>{let{text:e,...o}=t;return Object(a.jsx)("div",c({dangerouslySetInnerHTML:{__html:e}},o))}))},645:function(t,e,o){"use strict";o.d(e,"a",(function(){return n}));var r=o(467);const n=(t,e)=>{const o=e.indices[0],n=e.indices[1],a=t.substring(o,n);if(e.phoneNumber){return`<a href=${Object(r.b)(e.phoneNumber)} target="_blank" rel="noopener noreferrer">${a}</a>`}return`<a href=${Object(r.c)(e.url)} target="_blank" rel="noopener noreferrer">${a}</a>`}},883:function(t,e,o){"use strict";o(384);var r=o(645),n=o(514),a=o(385);e.a=t=>{let{text:e,textEntities:o}=t;if(!o||!o.length)return Object(a.jsx)(n.a,{text:e});const c=o.reduce(((t,n,a)=>{const c=o[a+1],i=n.indices[1],s=e.substring(i,c?c.indices[0]:void 0);return`${t}${`${Object(r.a)(e,n)}${s}`}`}),e.substring(0,o[0].indices[0]));return Object(a.jsx)(n.a,{text:c})}}}]);